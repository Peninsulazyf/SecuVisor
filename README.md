# SecuVisor——水利工程智能AI审图系统

## 一、项目背景

### 1.1 设计背景

本项目设计背景源于对水利工程行业现状的深刻洞察和对AI智能审图技术发展趋势的敏锐把握。近年来，AI智能审图在传统建筑行业中得到了快速发展，据报道，AI审图系统在处理同一批图纸时候，发现的问题数量是人工审图的7.3倍，速度是人工的8.7倍，而成本仅为人力的0.1倍。更重要的是，AI审图系统随着数据集的不断扩大，其审查的质量和效率也将不断提升，然而在特异性较强的水利工程行业还尚未得到应用。鉴于此，本项目预期开发一款基于飞桨深度学习平台和文心ERNIE SDK等工具的水利工程图纸智能审查系统，旨在将AI审图的红利进入到水利工程行业，弥补市场空缺，并不断提高水利工程图纸审查效率和准确性。

![项目背景](https://ai-studio-static-online.cdn.bcebos.com/f611fa8e43c049df88727f1fde56f9633fe6dadcc0d14f8b8c5f62ec2d404acf)

### 1.2 市场现状

市场目前有万翼AI审图（同深圳市住建局等合作）、讯飞AI审图（同杭州萧山政务服务中心等合作）、小智审图（同中国建筑西南设计研究院等合作）等类似产品。但是通过调研和比较，发现现有项目存在的部分问题：
- **审图速度慢：** 万翼AI审图和讯飞AI审图都需要长达数小时的审查，效率低。做的较好的是小智审图，需要大约5-15分钟。
- **不支持水利工程图纸：** 万翼、讯飞和小智审图均集中于BIM审图，未能支持水利工程图纸的审查，因此导致水利工程公司未能实现图纸智能化审查。
- **不开源且需要收费：** 万翼、讯飞和小智审图均是闭源产品，且价格略微昂贵，但是本项目将会在飞桨星河社区开源上线，为相关开发者提供完全免费的服务和支持。

![市场比较](https://ai-studio-static-online.cdn.bcebos.com/a8013792b19d4d26bd45ca53980f01c712e797d751ec43d894e7fba81cacd938)

针对上述产品审图速度慢的问题，本系统认为上述产品算法复杂度高，且数据预处理复杂，且缺乏并发处理能力。因此，本系统抛弃了复杂的图像处理步骤，大大提高了审查速度。针对上述产品不支持水利工程图纸的问题，本系统认为是泛化性和鲁棒性不够，应当优化网络架构，选用合适的多模态大模型。并积极开源，支持免费使用！

### 1.3 需求调研

SecuVisor项目致力于解决水利工程行业在图纸审查中的痛点，即审查速度慢、成本高及准确性低等问题。通过线上调研和跟相关水利工程公司进行沟通，了解到当前水利工程公司在审查图纸时，仍然依赖人工经验，这种方式不仅耗时费力，而且容易出现疏漏。尤其是处理大量复杂水利工程图纸时，效率和质量都难以得到保证。此外，市面上虽有针对建筑行业的智能审图解决方案，但它们未能满足水利工程图纸的特殊要求。


## 二、作品内容

### 2.1 技术路线

![](https://ai-studio-static-online.cdn.bcebos.com/6d4d8e26d29b4a59805c7df678eb924f8525e3b286aa4856ab2c677a796220f2)

首先，通过异常生成手段，将水利工程图纸扩充到十万级。接着，针对水利工程图纸复杂的多模态信息，采用协同特征表征有助于多模态信息对齐和后续处理。然后，借助优化后的飞桨文字检测套件PP-OCR V3、PP Structure V2和STEAL模型，从文本、表格和边缘结构等层面对水利工程图纸进行解析，帮助多模态大模型认知水利工程图纸核心内容和图纸内涵。最后，依托规范数据库的构建，VIMER-UFO 2.0可以通过检索增强生成（RAG）的方式解决幻觉等问题，提高审查准确性，实现对图纸的高效审查。

### 2.2 异常数据集生成

在数据收集的过程中，我们观察到，获取标准的图纸样本相对较为容易，而异常图纸样本的收集则面临较大挑战。因此，提出了扭曲长短、拼图游戏、方向变换和缺失模拟四种异常生成策略用于生成异常图纸。最终，成功构建了21.47万张水利工程图纸数据集，通过实验发现，在不改变模型架构的前提下，精度提高了71.82%。

### 2.3 多模态信息表示

水利工程图纸承载了大量复杂的多模态信息，主要包括文本、图像以及表格三种模态信息，如何借助深度学习技术充分挖掘这三种多模态信息的价值成为了关键性问题。
![](https://ai-studio-static-online.cdn.bcebos.com/f49528b5451744119dfdd877d9a8788121efe430b7084da4846a4b45268b3dc5)

本系统利用飞桨的PP-OCR V3和PP-Structure V2工具，将包含复杂表格信息的数据解构为文本和图像两种基本模态，以提高处理效率。对于文本部分，采用自然语言处理技术将其转换成文本嵌入向量；对于图像部分（如水利工程图纸），则先将其分割成32×32像素的非重叠小块（patch），并为每个patch添加位置编码以保持空间信息，再通过一个可学习的权重矩阵转换成固定维度的向量。这些向量与文本嵌入向量一同作为输入，送入Transformer编码器中，实现文本和图像信息的协同特征表示。协同特征表示如图4所示。

![](https://ai-studio-static-online.cdn.bcebos.com/7ec7f1def5ad4f9aa21feeade71f62462a25fec2caa54644b6def20e257912a3)

### 2.4 图纸信息解析

采用飞桨文字检测套件PP-OCR V3能够自动化识别和解析图纸上的文本信息（如尺寸标注、材料说明、技术要求等）和对应的位置信息。除此之外，本系统还收集了图纸中常见的一些特殊符号并融合领域知识进行标记，构建成水利工程特殊符号数据集，供PP-OCR V3模型进行训练。使用优化后的PP-OCR V3对图纸进行文本信息和对应位置信息的提取，编码后能够更好地帮助VIMER-UFO 2.0进行图纸审查。PP-OCR V3架构图如图5所示。

![](https://ai-studio-static-online.cdn.bcebos.com/e30c684a5e01446eba2a3fa314f58be60551d9891977433e9f8d88bc087594fe)

采用飞桨文字检测套件PP-Structure V2可以帮助解析水利工程图纸中的表格内容，并尝试将其解耦成文本信息和图片结构信息，进而帮助多模态大模型进行图纸审查。PP-Structure V2整体流程为文档图像首先经过图像矫正模块，判断整图方向并完成转正，随后可以完成版面信息分析与关键信息抽取两类任务。PP-Structure V2架构图如图6所示。

![](https://ai-studio-static-online.cdn.bcebos.com/f6349bb9554949b6911835d9ecf3cbcb026a7bda5a194e06957b9f7b863285aa)

采用STEAL算法可以对工程图纸中的线条边界进行精准识别，从而获取更为准确的特征信息。本系统选择的框架可以联合学习对象边缘，同时在训练过程中进行主动对齐，使用真实的边界信号来训练边界网络，使得获取的特征信息更为精准，STEAL架构图如图7所示。

![](https://ai-studio-static-online.cdn.bcebos.com/031c48e0f2f948e987695ecb12cb54f29ef673c27ce540eca37de0e38eba393b)

### 2.5 大模型审查模块

采用VIMER-UFO 2.0可以进行水利工程图纸的审查任务。相比于之前主流的视觉模型生产流程通常采用单任务的“从零开始训练”方案，每个任务都是独立的，无法相互借鉴。百度提出的 VIMER-UFO All in One 多任务训练方案，通过使用多个任务的数据训练一个功能强大的通用模型，可被直接应用于处理多个任务。因此，本系统通过对VIMER-UFO 2.0进行RAG，即可实现水利工程图纸的精确审查，VIMER-UFO 2.0架构图如图8所示。

![](https://ai-studio-static-online.cdn.bcebos.com/5ee15b9397264e5d8296ef414f6ebe3177cc1cf8b88f420594698d32b7d0c747)

### 2.6 检索增强生成（RAG）

RAG主要分为五个步骤：知识文档的准备，嵌入模型，向量数据库，查询检索和生产问答，图9展示了对VIMER-UFO 2.0进行RAG的整体框架。

![](https://ai-studio-static-online.cdn.bcebos.com/f1482f37b3544c0b81f732880bea6f58b4b39c7a6b024f13b490d314e345f94a)

首先，需要准备知识文档。在水利工程场景中，通过文档转换器（如PDF转换器）和多模态技术（如PP-OCR V3），将丰富的知识源转换为大语言模型可以理解的纯文本数据。并进行文档切片，将文档分割为多个文本块，以高效地处理和检索信息。然后，需要进行嵌入模型，进而捕捉句子上下文关系和核心含义。接着，需要构建向量数据库，通过嵌入模型生成的所有向量都会被存储在向量数据库中，进而优化了处理和存储大规模向量数据的效率，使得在面对海量知识向量时，能够迅速检索出最相关的信息。最后，模型进行处理查询，相关的问题会输入到嵌入模型中进行向量化处理，通过检索信息，即可得到最后大模型的答案。

## 三、应用前景
SecuVisor——基于飞桨文心的水利工程智能审图系统，精准对接了水利工程行业在图纸审查领域的迫切需求，通过AI技术的应用，显著提升了审查速度与准确性，降低了成本，为行业的数字化转型提供了强有力的技术支撑。项目采用多模态信息处理、深度学习、检索增强生成等前沿技术，构建了高效的智能审图系统，尤其在处理复杂专业的水利工程图纸方面展现出卓越能力。作为开源项目，SecuVisor不仅促进了技术创新和应用发展，还通过与企业的合作提供定制化服务，形成了多样化的商业模式，有望成为推动水利工程行业智能化转型的关键力量。此外，SecuVisor的广泛应用将有效提升项目管理水平，促进水资源合理利用，保障公共安全，减少人为错误，加快项目进度，确保工程质量，同时为其他行业引入AI技术提供了示范，推动社会经济高质量发展。未来，随着技术进步和完善，SecuVisor将在水利工程行业的智能化、信息化建设中发挥更加重要的作用！

## 四、成果展示

### 4.1 异常数据生成

![](https://ai-studio-static-online.cdn.bcebos.com/fb97e8688bb44d4aaf8844416c102242aecf9dd7cfff4928bf2d3e03b62e4205)

### 4.2 交互式图纸审查

![](https://ai-studio-static-online.cdn.bcebos.com/acff3a1d4c084fd79fb5950c66f2f7230c43fdd73670409280cd483be137d555)


